/*! (c) Andrea Giammarchi - ISC */
let e=0;export default function(t){const s=new Map,n=async(t,n)=>{for(let a=0,{length:i}=n;a<i;a++)if(n[a].endsWith(".new")){const i=new(t[n[a].slice(0,-".new".length)])(...n[++a]);s.set(t=String(e++),i)}else t=n[a].endsWith(".apply")?await t[n[a].slice(0,-".apply".length)](...n[++a]):await t[n[a]];return t};addEventListener("message",(async({data:{id:e,list:a}})=>{if(!/^proxied-worker:([^:]*?):-?\d+$/.test(e))return;const i=RegExp.$1;let r,l;if(i.length){if(!a.length)return void s.delete(i);try{r=await n(s.get(i),a)}catch({message:e}){l=e}}else try{r=await n(t,a)}catch({message:e}){l=e}postMessage({id:e,result:r,error:l})}))};
